<div class="bg-light h-100 p-lg-5 pt-3 overflow-auto">
  <div class="container h-100 pb-lg-0 pb-3">
    <ng-container *ngIf="(filterPresentation$ | async) as filter">
      <app-nav class="d-lg-none block d-block" *ngIf="this.router.url !== '/orientation'" [filter]="filter" size="sm"></app-nav>
      <div class="row g-0 h-100 shadow mb-5">
        <div class="col-lg col-12 bg-white pt-3 h-lg-100 overflow-auto d-flex flex-column flex-grow-1">
          <app-nav class="d-lg-block d-none" *ngIf="this.router.url !== '/orientation'" [filter]="filter"></app-nav>
          <div
            tabindex="-1"
            appScroll
            (reachEnd)="hideArrow = $event"
            class="overflow-scroll h-100 d-lg-block d-flex flex-column"
            [@routeAnimations]="getRouteAnimationData()">
            <router-outlet></router-outlet>
          </div>
          <div class="d-flex justify-content-center shadow-white-top z-index-over-base" [class.invisible]="hideArrow">
            <i class="ri-arrow-right-s-line ri-xl ri-fw ri-space text-primary" style="transform: rotate(90deg)"></i>
          </div>
        </div>
        <ng-container *ngIf="(lieuxMediationNumerique$ | async) as lieuxMediationNumerique">
          <ng-container *ngIf="(lieuxMediationNumeriqueTotal$ | async) as lieuxMediationNumeriqueTotal">
            <div class="d-lg-flex col-lg-4 col-12 bg-primary text-white h-lg-100 p-4 overflow-auto align-items-center">
              <div class="flex-column d-flex w-100 text-center">
                <div class="d-lg-none">
                  <b>{{ lieuxMediationNumerique.length}} / {{ lieuxMediationNumeriqueTotal.length }}</b>
                  <div class="opacity-75">Structures trouv√©es sur le territoire</div>
                </div>
                <div class="d-lg-block d-none">
                  <h2 class="text-center text-secondary fw-bold mb-5" *ngIf="this.router.url !== '/orientation'">
                    Structures
                    <br />
                    {{ router.url === '/orientation' ? 'sur le territoire' : 'correspondantes'}}
                  </h2>
                  <app-filter-result-count
                    class="my-auto"
                    [total]="lieuxMediationNumeriqueTotal.length"
                    [found]="lieuxMediationNumerique.length"
                    [empty]="router.url === '/orientation'"></app-filter-result-count>
                </div>
                <ng-container *ngIf="this.router.url !== '/orientation'">
                  <app-selected-filters
                    class="my-auto"
                    [filterForm]="filterForm"
                    [filterPresentation]="filterPresentation$ | async"></app-selected-filters>
                  <app-display-on-map-link
                    class="text-center d-block my-3"
                    [cartographieFeature]="features.get('cartographie')"
                    [lieuxMediationNumeriqueCount]="lieuxMediationNumerique.length"
                    [queryParams]="route.queryParams"></app-display-on-map-link>
                </ng-container>
              </div>
            </div>
          </ng-container>
        </ng-container>
      </div>
    </ng-container>
  </div>
</div>

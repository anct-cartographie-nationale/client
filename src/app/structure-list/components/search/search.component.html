<div class="header">
  <span class="title">Acteurs de la médiation</span>
</div>
<div class="content" fxLayout="column">
  <div class="searchSection" fxLayout="row" fxLayoutGap="1.5vw">
    <div class="icon">
      <div class="ico-pin-search grey"></div>
    </div>
    <input type="text" [(ngModel)]="searchTerm" placeholder="Rechercher une adresse, une association..." />
    <button type="button" (click)="applyFilter()">Rechercher</button>
  </div>

  <div class="btnSection" fxLayout="row" fxLayoutAlign="space-between center">
    <div
      class="button"
      [ngClass]="{ selected: modalTypeOpened === modalType[0] }"
      (click)="openModal(this.modalType[0])"
      fxLayout="row"
      fxLayoutAlign="space-between center"
    >
      <span class="btnText">Accompagnement</span>
      <div class="arrow"></div>
    </div>
    <div
      class="button"
      [ngClass]="{ selected: modalTypeOpened === modalType[1] }"
      (click)="openModal(this.modalType[1])"
      fxLayout="row"
      fxLayoutAlign="space-between center"
    >
      <span class="btnText">Formations</span>
      <div class="arrow"></div>
    </div>
    <div
      class="button"
      [ngClass]="{ selected: modalTypeOpened === modalType[2] }"
      (click)="openModal(this.modalType[2])"
      fxLayout="row"
      fxLayoutAlign="space-between center"
    >
      <span class="btnText">Plus de filtres</span>
      <div class="arrow"></div>
    </div>
  </div>
  <div
    *ngIf="modalTypeOpened"
    fxLayout="column"
    fxLayoutAlign="space-between"
    [ngClass]="['modal', 'modal' + modalTypeOpened]"
  >
    <div class="contentModal" fxLayout="row wrap" fxLayoutAlign="flex-start" *ngIf="categories.length > 0">
      <!--<div class="blockFiltre" *ngFor="let s of services">-->
      <div class="blockFiltre" *ngFor="let c of categories">
        <h4>{{ c.name }}</h4>

        <ul class="blockLigne">
          <div fxLayout="row" class="ligneFiltre" fxLayoutAlign="space-between center" *ngFor="let module of c.modules">
            <li class="checkbox">
              <div class="checkboxItem">
                <label>
                  <input
                    type="checkbox"
                    [checked]="getIndex(module.id, c.name) > -1"
                    [value]="module.id"
                    (change)="onCheckboxChange($event, c.name)"
                  />
                  <span class="customCheck"></span>
                </label>
                <div class="label">{{ module.text }}</div>
              </div>
            </li>
            <span class="nbResult">{{ module.count ? module.count : '0' }}</span>
          </div>
        </ul>
      </div>
    </div>
    <div class="footer" fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="3vw">
      <a (click)="clearFilters()">Effacer</a>
      <button type="button" (click)="applyFilter(modalTypeOpened)">Appliquer</button>
    </div>
  </div>
</div>
<div class="footerSearchSection" fxLayout="row" fxLayoutAlign="space-between center">
  <div class="checkbox">
    <div class="checkboxItem">
      <label>
        <input type="checkbox" />
        <span class="customCheck"></span>
      </label>
      <div class="label">Pass numérique</div>
    </div>
  </div>
  <a href="">Ajouter une structure</a>
</div>

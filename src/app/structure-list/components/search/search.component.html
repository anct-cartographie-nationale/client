<div class="header">
  <span class="title">Acteurs de la médiation</span>
</div>
<div class="content" fxLayout="column">
  <div class="searchSection">
    <form
      [formGroup]="searchForm"
      fxLayout="row"
      fxLayoutGap="1.5vw"
      fxLayoutAlign=" center"
      (ngSubmit)="applyFilter(searchForm.value.searchTerm)"
    >
      <div class="inputSection" fxLayout="row" fxLayoutAlign="space-between center">
        <input type="text" formControlName="searchTerm" placeholder="Rechercher une adresse, une association..." />
        <button type="button" (click)="clearInput()" class="icon close"><div class="ico-close-search"></div></button>

        <span class="separator"></span>
        <button class="icon pin" type="button" (click)="locateMe()"><div class="ico-pin-search"></div></button>
      </div>

      <button class="btnSearch" type="submit">
        <div class="searchButton">Rechercher</div>
      </button>
    </form>
  </div>
  <div (clickOutside)="closeModal()">
    <div class="btnSection" fxLayout="row" fxLayoutAlign="space-between center">
      <button
        type="button"
        [ngClass]="{
          selected: modalTypeOpened === TypeModal.accompaniment,
          containCheckedFilters: numberAccompanimentChecked
        }"
        (click)="openModal(TypeModal.accompaniment)"
        fxLayout="row"
        fxLayoutAlign="space-between center"
      >
        <span class="btnText">Accompagnement</span>
        <div class="arrow"></div>
      </button>
      <button
        type="button"
        [ngClass]="{
          selected: modalTypeOpened === TypeModal.training,
          containCheckedFilters: numberTrainingChecked
        }"
        (click)="openModal(TypeModal.training)"
        fxLayout="row"
        fxLayoutAlign="space-between center"
      >
        <span class="btnText">Formations</span>
        <div class="arrow"></div>
      </button>
      <button
        type="button"
        [ngClass]="{
          selected: modalTypeOpened === TypeModal.moreFilters,
          containCheckedFilters: numberMoreFiltersChecked
        }"
        (click)="openModal(TypeModal.moreFilters)"
        fxLayout="row"
        fxLayoutAlign="space-between center"
      >
        <span class="btnText">Plus de filtres</span>
        <div class="arrow"></div>
      </button>
    </div>
    <div *ngIf="modalTypeOpened">
      <app-modal-filter
        [modalType]="modalTypeOpened"
        [categories]="categories"
        [modules]="checkedModulesFilter"
        (searchEvent)="fetchResults($event)"
        (closeEvent)="closeModal()"
      ></app-modal-filter>
    </div>
  </div>
</div>
<div class="footerSearchSection" fxLayout="row" fxLayoutAlign="space-between center">
  <div class="checkbox">
    <div class="checkboxItem">
      <label>
        <input
          type="checkbox"
          value="Pass numérique"
          [checked]="searchService.getIndex(checkedModulesFilter, 'Pass numérique', 'Labels et qualifications') > -1"
          (change)="numericPassCheck($event, 'Labels et qualifications')"
        />
        <span class="customCheck"></span>
        <div class="label">Pass numérique</div>
      </label>
    </div>
  </div>
  <a href="https://services.formulaireextranet.grandlyon.com/saisie-fiche-structure/" target="_blank"
    >Ajouter une structure</a
  >
</div>

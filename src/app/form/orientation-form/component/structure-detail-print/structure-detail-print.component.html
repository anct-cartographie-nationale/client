<div class="structrue-details-container" *ngIf="structure">
  <!-- Header info -->
  <div fxLayout="row" class="structure-details-block" fxLayoutAlign="baseline baseline" fxLayoutGap="8px">
    <div fxLayout="column" fxLayoutGap="10px" fxFlex="100%">
      <div fxLayout="column" class="no-margin" fxLayoutAlign="space-between start">
        <h3 class="bold">{{ structure.structureName }}</h3>
      </div>
      <div class="mobile-column">
        <div fxLayout="column" fxFlex="50%">
          <div *ngIf="structure.address" fxLayout="row" fxLayoutAlign="none flex-end" fxLayoutGap="13px">
            <app-svg-icon [type]="'ico'" [icon]="'adress'" [title]="'Adresse'"></app-svg-icon>
            <p>{{ structure.address.numero }} {{ structure.address.street }}, {{ structure.address.commune }}</p>
          </div>
          <div *ngIf="structure.contactPhone" fxLayout="row" fxLayoutAlign="none flex-end" fxLayoutGap="13px">
            <app-svg-icon [type]="'ico'" [icon]="'tel'" [title]="'Téléphone'"></app-svg-icon>
            <p>{{ structure.contactPhone | phone }}</p>
          </div>
          <div
            *ngIf="structure.contactMail && structure.contactMail !== 'unknown@unknown.com'"
            fxLayout="row"
            fxLayoutAlign="none center"
            fxLayoutGap="13px"
          >
            <app-svg-icon [type]="'ico'" [iconClass]="'grey-1'" [icon]="'email'" [title]="'Email'"></app-svg-icon>
            <p>{{ structure.contactMail }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Accueil -->
  <div
    *ngIf="structure.accessModality.length > 0 || structure.hours.hasData() || structure.remoteAccompaniment"
    fxLayout="column"
    class="structure-details-block"
    fxLayoutAlign="baseline baseline"
    fxLayoutGap="20px"
  >
    <!-- Opening Hours -->
    <div fxLayout="row" class="w-100 mobile-column">
      <div *ngIf="structure.hours.hasData()" fxFlex="50%">
        <h3 class="subtitle">Horaires d’ouverture au public</h3>
        <div fxLayout="column">
          <div *ngFor="let day of structure.hours | keyvalue: keepOriginalOrder">
            <div *ngIf="day.value.open">
              <h4>{{ day.key | day }}</h4>
              <div class="opening-time" fxLayout="row" fxLayoutAlign="none flex-end">
                <div *ngFor="let timeRange of day.value.time; let isFirst = first">
                  <p *ngIf="isFirst && timeRange.opening">
                    de {{ timeRange.formatOpeningDate() }} à {{ timeRange.formatClosingDate() }}
                  </p>
                  <p *ngIf="!isFirst && timeRange.opening">
                    et de {{ timeRange.formatOpeningDate() }} à {{ timeRange.formatClosingDate() }}
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- accessModality -->
      <div *ngIf="structure.accessModality.length > 0" fxFlex="40%">
        <h3 class="subtitle">Accès transports en commun</h3>
        <div fxLayout="column">
          <div *ngFor="let tclStop of tclStopPoints">
            <div fxLayout="row wrap" fxLayoutGap="5px">
              <p>{{ tclStop.name }}:</p>
              <p *ngIf="tclStop.subLines.length > 0">Métro</p>
              <p *ngFor="let sub of tclStop.subLines">{{ sub }}</p>
              <p *ngIf="tclStop.tramLines.length > 0">Tram</p>
              <p *ngFor="let tram of tclStop.tramLines">{{ tram }}</p>
              <p *ngIf="tclStop.busLines.length > 0">Bus</p>
              <p *ngFor="let bus of tclStop.busLines">{{ bus }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="structure.exceptionalClosures" class="bold-info">
      <h3 class="subtitle">Précisions sur les horaires</h3>
      <p>{{ structure.exceptionalClosures }}</p>
    </div>
    <div *ngIf="structure.remoteAccompaniment" class="bold-info">
      <h3>Cette structure propose un accompagnement à distance.</h3>
    </div>
  </div>
</div>
